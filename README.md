# 自动驾驶控制台
## dependencies
- tinyxml2 xml解析器

```bash
git clone https://github.com/leethomason/tinyxml2.git
cd tinyxml2 && sudo make install
//#include<tinyxml2.h>
```

## functions
### 可编辑的[指令文件](cmd.xml)
1. 指令文件包含了一系列子程序信息(名称/启动指令/关闭指令/按键控制等)
2. 当Nodes的属性use_botton为true时，界面将自动生成控制按钮并关联LaunchCommand和CloseCommand

### 诊断消息输出功能
1. 滚动显示诊断信息，包括设备名称/诊断级别/诊断信息
2. 在[滚动输出栏]中<双击>设备名称可使其加入[实时覆盖式输出栏]
3. 在[实时覆盖式输出栏]中<双击>设备名称可使其返回[滚动输出栏]
[滚动输出栏]: 新的诊断信息以新行的形式加入到表格
[实时覆盖式输出栏]: 同一设备的诊断信息仅显示一行，新消息覆盖旧消息
4. 双击表头Message可暂停/继续消息滚动

### 自动驾驶服务器检测
UI启动时，自动检测自动驾驶服务器，若服务器不在线则自动启动，其中启动指令位于[指令文件]中的driverless节点


2020.6.25 添加传感器状态指示灯
1. 若传感器驱动为官方驱动则订阅传感器消息判断传感器是否正在工作，对于更新频率比较高的传感器，需要限定更新间隔以减少资源消耗
2. 若传感器驱动为用户自定义驱动，则定时发布自诊断信息，av_cosole订阅传感器诊断信息判断其是否正在工作
3. 当前传感器状态与上次状态不同时触发状态灯改变信号
4. 利用sensor_msgs::NavSatFix消息判断GPS和RTK的有效性，收到消息则认为GPS有效，gps_fix->status.status　== 10时认为RTK有效，10为自定义值，应与GPS驱动程序保持一致
5. 将所有传感器ID以枚举类型表示，触发状态变化信号时传递传感器ID和status,用同一信号和槽解决所有传感器状态传递问题
6. 建立传感器指针容器，方便循环检测传感器状态

2021.6.23
1. 添加用户自定义按钮，通过cmd.xml填写按键名称以及关联的控制指令，自动生成按钮
2. 订阅ros诊断信息用于并使用treeWidget显示诊断数据

